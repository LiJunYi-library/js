function deleteKey(e,t,i){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s))try{i&&(t[s]=""),delete t[s]}catch(e){}}function assignStyle(e,t){for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]="",e[i]=t[i])}function convertToCamelCase(e){if(e.includes("-")){const t=e.split("-");return t[0]+t.slice(1).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("")}return e}function camelCaseToKebabCase(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class RainbowEvent extends Event{constructor(e,t,i){if(super(e,t),this.detail=i,i instanceof Array)for(const e in i)try{void 0===this[e]&&(this[e]=i[e])}catch(e){console.warn(e)}}}function createCustomEvent(e,t,i={}){const s=new CustomEvent(e,{bubbles:!0,cancelable:!0,...i});for(const e in t)try{void 0===s[e]&&(s[e]=t[e])}catch(e){console.warn(e)}return s}function renderChildren(e={}){const t={parentNode:void 0,...e};let i,s=new Map;return{renderList:function(e=[],n){const r={beforeEach:()=>0,keyExtractor:(e,t)=>t,onCacheNode:()=>0,onCreateNode:()=>0,onDeleteNode:()=>0,onRemoveNode:()=>0,onBeforeInsertNode:()=>0,onInsertBeforeNode:()=>0,...n},o=new Map;i=void 0,r.beforeEach({cacheMap:s,pointer:i}),e.forEach(((e,n)=>{const l=r.keyExtractor(e,n);let a;r.onBeforeInsertNode(e,n,l),s.has(l)?(a=s.get(l),r.onCacheNode(a,e,n,l),i&&(i.nextSibling===a||t.parentNode.insertBefore(a,i.nextSibling)),i=a,s.delete(l),r.onDeleteNode(a,e,n,l)):(a=r.onCreateNode(e,n,l),i?t.parentNode.insertBefore(a,i?.nextSibling):t.parentNode.insertBefore(a,t.parentNode?.firstChild),i=a),r.onInsertBeforeNode(a,e,n,l),o.set(l,a)})),s.forEach(((e,t)=>{e.remove(),r.onRemoveNode(e,t)})),i=void 0,s=o}}}const events=new Map;new MutationObserver((e=>{events.forEach(((t,i)=>{t instanceof Function&&t.call(i,e)}))})).observe(document,{subtree:!0,attributes:!0,attributeOldValue:!0});const treeAttrsChangeIMP={simult:{init(){this.$.changePropsRender&&events.set(this,(()=>this.$.changePropsRender()))},disconnected(){events.delete(this)}},settle:{init(){}},async:{init(){}}};function resizeObserverIMP(e={}){let t;const i={isOnlyResizeWidth:!1,isOnlyResizeHeight:!1,resizeCallback:void 0,resizeOptions:{},...e};let s={};return{simult:{init(){const e=i.resizeCallback?i.resizeCallback.bind(this):this.$debouncedRender.bind(this);try{t=new ResizeObserver(((...t)=>{let n={width:this.offsetWidth,height:this.offsetHeight};i.isOnlyResizeWidth&&s.width!==n.width&&e(...t),i.isOnlyResizeHeight&&s.height!==n.height&&e(...t),i.isOnlyResizeWidth||i.isOnlyResizeHeight||e(...t),s=n})),t.observe(this,i.resizeOptions)}catch(e){console.warn(e)}},disconnected(){t.disconnect(this)}}}}function treeObserverIMP(e={}){let t,i;const s={childrenResizeOptions:{},onChildrenSizeChange(){},resizeOptions:{},onSizeChange(){},onWidthChange(){},onHeightChange(){},mutationOptions:{childList:!0},onChildChange(){},onAttributeChange(){},...e};let n={offset:{}};return{simult:{init(){try{i=new ResizeObserver(((e,...t)=>{let i={width:this.offsetWidth,height:this.offsetHeight};n.offset.width!==i.width&&s.onWidthChange.call(this,e,i),n.offset.height!==i.height&&s.onHeightChange.call(this,e,i),n.offset.width===i.width&&n.offset.height===i.height||s.onSizeChange.call(this,e,i),n.offset=i,!1===e.some((e=>e.target===this))&&s.onChildrenSizeChange.call(this,e)})),i?.observe?.(this,s.resizeOptions)}catch(e){console.warn(e)}t=new MutationObserver(((e,...t)=>{for(let t of e)if("childList"===t.type){const e=Array.from(t.addedNodes).filter((e=>e.style)),n=Array.from(t.removedNodes).filter((e=>e.style));e.forEach((e=>i.observe(e,s.childrenResizeOptions))),n.forEach((e=>i.unobserve(e))),s.onChildChange.call(this,t)}else"attributes"===t.type&&s.onAttributeChange.call(this,t)})),t.observe(this,s.mutationOptions)},disconnected(){t.disconnect(this),i.disconnect(this)}}}}class ListArray extends Array{constructor(...e){super(...e),Object.defineProperty(this,"events",{value:{},writable:!0,enumerable:!1,configurable:!1})}addEventListener(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}removeEventListener(e,t){this.events[e]||(this.events[e]=[]),arrayRemove(this.events[e],t)}onChange(e,...t){this.events.change instanceof Array&&this.events.change.forEach((i=>i(e,...t))),this.events[e]instanceof Array&&this.events[e].forEach((e=>e(...t)))}copyWithin(...e){let t=super.copyWithin(...e);return this?.onChange?.("copyWithin",...e),t}fill(...e){let t=super.fill(...e);return this?.onChange?.("fill",...e),t}pop(...e){let t=super.pop(...e);return this?.onChange?.("pop",...e),t}push(...e){let t=super.push(...e);return this?.onChange?.("push",...e),t}shift(...e){let t=super.shift(...e);return this?.onChange?.("shift",...e),t}unshift(...e){let t=super.unshift(...e);return this?.onChange?.("unshift",...e),t}splice(...e){let t=super.splice(...e);return this?.onChange?.("splice",...e),t}sort(...e){let t=super.sort(...e);return this?.onChange?.("sort",...e),t}reverse(...e){let t=super.reverse(...e);return this?.onChange?.("reverse",...e),t}}function arrayAt(e,t){return e[t<0?e.length+t:t]}function arrayLoop(e,t){for(let i=0;i<e;i++)if(!1===t(i))return}function arrayLoopMap(e,t){const i=[];for(let s=0;s<e;s++)i.push(t(s));return i}function arrayRemove(e=[],t){const i=e.findIndex((e=>e===t));return~i&&e.splice(i,1),e}function arrayBinarySearch(e=(e,t)=>e.right=t-1,t=[],i,s){const n={left:0,right:t.length-1,result:-1};for(;n.left<=n.right;){const r=Math.floor((n.left+n.right)/2),o=t[r];i(o)?(n.result=r,e(n,r,o)):s(o)?n.left=r+1:n.right=r-1}return n.result}function arrayBinaryFindIndex(e=[],t,i){return arrayBinarySearch(((e,t)=>{e.right=t-1}),e,t,i)}function arrayRewriteFunction(e=[],t){const i={},s={};return["copyWithin","fill","push","pop","shift","unshift","splice","sort","reverse"].forEach((n=>{i[n]=e[n],s[n]={value:function(...s){const r=i[n].call(e,...s);return t instanceof Function&&t?.("name",...s),r},writable:!0,enumerable:!1,configurable:!1}})),Object.defineProperties(e,s),e}function setTimeoutPromise(e=0,t=e){return new Promise((i=>setTimeout((()=>i(t)),e)))}function animationDebounced(e){let t;return function(...i){cancelAnimationFrame(t),t=requestAnimationFrame((t=>{e(...i)}))}}Array.prototype.at||(Array.prototype.at=function(...e){return arrayAt(this,...e)});class RainbowElement extends HTMLElement{static $registerProps(e){const t=[],i={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t.push(s),e[s]?.default instanceof Function?i[s]=e[s].default(i):i[s]=e[s]?.default);return this.prototype.$types=e,this.prototype.$props=i,t}IMPS=[treeAttrsChangeIMP];$={self:this,getSlotContainer:e=>{const t=e?.getAttribute?.("solt");if(!t)return;const i=this.$slotContainer?.[t];return i},_getSC:(...e)=>this.$.getSlotContainer(...e),renderSolt:e=>{if(["r-template","template"].includes(e.localName)){const t=e.getAttribute("solt");return this.$slotContainer?.[t]?.append(e),e}return!1},isInitAttrs:!1,data:{},DATA:new Proxy({},{get:(e,t)=>this.$.data[camelCaseToKebabCase(t)]}),props:{...this.constructor.prototype.$props},resolveFunCss:{calc:(e,...t)=>e},resolveCss:(key,str="")=>{try{const isAttrFun=/r-attr\([^\)]*?\)/.test(str);isAttrFun&&(str=this.$.props[key]);let cssVal=str.replace(/\d+px|\d+vw|\d+vh/g,(e=>/\d+px/.test(e)?Number(e.replaceAll("px","")):/\d+vw/.test(e)?Number(e.replaceAll("vw",""))/100*window.innerWidth:/\d+vh/.test(e)?Number(e.replaceAll("vh",""))/100*window.innerHeight:e));if(/([^\(]*?)\([^\)]*?\)/.test(cssVal))return eval(`this.$.resolveFunCss.${cssVal}`);let number=Number(cssVal);return isNaN(number)?/.*?,.*?/.test(cssVal)?cssVal.trim().split(",").filter(Boolean):cssVal:number}catch(e){return console.log(e),str}},cache:{data:{},style:{},class:new Map},resolvePercentum:(e="",t=this,i=e=>e.offsetWidth)=>/\d+?%/.test(e)?i(t)*(e.replaceAll("%","")/100):e,resolvePercentumH:(e,t,i=e=>e.offsetHeight)=>this.$.resolvePercentum(e,t,i),setStyle:(e=()=>({}))=>{let t=e(this.$.data)||{},i=t;t instanceof Array&&(i=t.filter(Boolean).reduce(((e,t)=>(Object.assign(e,t),e)),{}));for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&(this.$.cache.style[e]!==i[e]&&(this.style[e]="",this.style[e]=i[e]),delete this.$.cache.style[e]);for(const e in this.$.cache.style)Object.prototype.hasOwnProperty.call(this.$.cache.style,e)&&(this.style[e]="");this.$.cache.style=i},setClass:(e=()=>[])=>{let t=e(this.$.data);void 0===t?.length&&(t=[t]),t=t.filter(Boolean);let i=new Map;t.forEach((e=>{i.set(e,e),this.$.cache.class.delete(e),this.classList.add(e)})),this.$.cache.class.forEach(((e,t)=>{this.classList.remove(e)})),this.$.cache.class=i},findParentByLocalName:(e,t=this)=>{if(!t)return;const i=t.parentNode;return i?e instanceof Array&&e.includes(i.localName)||i.localName===e?i:this.$.findParentByLocalName(e,i):void 0},findChildByLocalName:(e,t=this)=>{if(!t)return;return t.getElementsByTagName(e)},getOffsetTop:(e,t=0)=>{if(this.offsetParent===e)return t;let i=t+this.offsetTop;return this.$.getOffsetTop(this.offsetParent,i)},isAnimation:!1,transitionrun:()=>{this.$.isAnimation=!0},transitioncancel:()=>{this.$.isAnimation=!1},transitionend:()=>{this.$.isAnimation=!1},changePropsRender:e=>{if(this.$.isAnimation)return;let t=!1;const i={},s=window.getComputedStyle(this);for(const e in this.$.props)if(Object.prototype.hasOwnProperty.call(this.$.props,e)){const n=s.getPropertyValue("--"+e).trim();i[e]=this.$.resolveCss(e,n),this.$.cache.data[e]!==i[e]&&(t=!0)}return this.$.data=i,this.$.cache.data=i,(t||!0===e)&&this.$debouncedRender(i),i},append:(...e)=>super.append(...e),appendChild:(...e)=>super.appendChild(...e),insertBefore:(...e)=>super.insertBefore(...e),removeChild:(...e)=>super.removeChild(...e)};constructor(...e){super(...e),this.IMPS.push(...this.$onRegisterIMPS?.()||[]),this.$debouncedRender=animationDebounced(((...e)=>this.$render(...e))),this.IMPS.map((e=>e?.simult))?.forEach((e=>e?.init?.call?.(this))),this.addEventListener("transitionrun",this.$.transitionrun),this.addEventListener("transitioncancel",this.$.transitioncancel),this.addEventListener("transitionend",this.$.transitionend)}$slotContainer={default:this};append(...e){console.log("append"),e.forEach(((e,t)=>this.$._getSC(e)?this.$._getSC(e)?.append?.(e):this===this.$slotContainer.default?super.append?.(e):void this.$slotContainer.default?.append?.(e)))}appendChild(e){return console.log("appendChild"),this.$._getSC(e)?this.$._getSC(e)?.appendChild?.(e):this===this.$slotContainer.default?super.appendChild?.(e):this.$slotContainer.default?.appendChild?.(e)}insertBefore(e,t){return console.log("insertBefore"),this.$._getSC(e)?this.$._getSC(e)?.insertBefore?.(e,t):this===this.$slotContainer.default?super.insertBefore?.(e,t):this.$slotContainer.default.insertBefore?.(e,t)}removeChild(e){return console.log("removeChild"),this.$._getSC(e)?this.$._getSC(e)?.removeChild?.(e):this===this.$slotContainer.default?super.removeChild?.(e):this.$slotContainer.default.removeChild?.(e)}attributeChangedCallback(e,t,i){this.$.props[e]=i,!0===this.$.isInitAttrs&&this.$onAttributeChanged(e,t,i)}$onAttributeChanged(){this.IMPS.map((e=>e?.simult))?.forEach((e=>e?.changeAttr?.call?.(this))),this.$.changePropsRender()}connectedCallback(){this.$.isInitAttrs=!0,this.IMPS.map((e=>e?.simult))?.forEach((e=>e?.connected?.call?.(this))),this.$.changePropsRender()}adoptedCallback(){this.IMPS.map((e=>e?.simult))?.forEach((e=>e?.adopted?.call?.(this)))}disconnectedCallback(){this.removeEventListener("transitionrun",this.$.transitionrun),this.removeEventListener("transitioncancel",this.$.transitioncancel),this.removeEventListener("transitionend",this.$.transitionend),this.IMPS.map((e=>e?.simult))?.forEach((e=>e?.disconnected?.call?.(this)))}$onRegisterIMPS(){return[]}$render(){}}class RAbsolute extends RainbowElement{static observedAttributes=this.$registerProps({"r-position":[Boolean,String]})}function Transition(e={}){const t={node:document.createElement("div"),name:"",className:"",oBeforeEnter:()=>0,onEnter:()=>0,onAfterEnter:()=>0,onEnterCancelled:()=>0,...e},i={className:[],show:async function(){if(!0===s.isAnimation)return;s.isAnimation=!0,await n.destroy(),t.node.classList.add(`${t.className}show`,`${t.name}enter-active`,`${t.name}enter-from`),t.node.classList.remove(`${t.name}enter-to`,`${t.className}hide`),t.node.setAttribute("part",t.node.className),t?.oBeforeEnter?.(),requestAnimationFrame((()=>{t.node.classList.add(`${t.name}enter-to`),t.node.classList.remove(`${t.name}enter-from`),t.node.setAttribute("part",t.node.className),t.onEnter(),t.node.addEventListener("transitionend",s.transitionend)}))},hide:async function(){if(!0===n.isAnimation)return;n.isAnimation=!0,await s.destroy(),t.node.classList.add(`${t.name}leave-active`,`${t.name}leave-from`),t.node.classList.remove(`${t.name}leave-to`),t.node.setAttribute("part",t.node.className),requestAnimationFrame((()=>{t.node.classList.add(`${t.name}leave-to`),t.node.classList.remove(`${t.name}leave-from`),t.node.setAttribute("part",t.node.className),t.node.addEventListener("transitionend",n.transitionend)}))},setName:function(e){t.name=e},visible:function(e){if(e)return t.node.classList.add(`${t.className}show`),t.node.classList.remove(`${t.className}hide`),void t.node.setAttribute("part",t.node.className);t.node.classList.add(`${t.className}hide`),t.node.classList.remove(`${t.className}show`),t.node.setAttribute("part",t.node.className)}};const s={isAnimation:!1,resolve:()=>0,clear:()=>{t.node.classList.remove(`${t.name}enter-active`,`${t.name}enter-to`,`${t.name}enter-from`),t.node.setAttribute("part",t.node.className),t.node.removeEventListener("transitionend",s.transitionend),t.node.removeEventListener("transitioncancel",s.transitioncancel),s.isAnimation=!1},transitionend:()=>{console.log("enter transitionend"),s.clear()},transitioncancel:()=>{console.log("enter transitioncancel"),s.clear()},destroy:()=>(s.clear(),new Promise(((e,t)=>{e(!0)})))},n={isAnimation:!1,resolve:()=>0,clear:()=>{t.node.classList.remove(`${t.name}leave-active`,`${t.name}leave-from`,`${t.name}leave-to`),t.node.setAttribute("part",t.node.className),t.node.removeEventListener("transitionend",n.transitionend),t.node.removeEventListener("transitioncancel",n.transitioncancel),n.isAnimation=!1},transitionend:()=>{console.log("leave transitionend"),t.node.classList.remove(`${t.className}show`),t.node.classList.add(`${t.className}hide`),t.node.setAttribute("part",t.node.className),n.clear()},transitioncancel:()=>{console.log("leave transitioncancel"),n.clear()},destroy:()=>(n.clear(),new Promise(((e,t)=>{e(!0)})))};return i}class RVisibleAnimate extends RainbowElement{static observedAttributes=this.$registerProps({"r-orientation":String});$$visible=!0;$$transition=Transition({node:this,name:"r-visible-animate-",className:"r-visible-animate-"});constructor(...e){super(...e)}open(){this.$$visible=!0,this.$$transition.show()}close(){this.$$visible=!1,this.$$transition.hide()}$render(){const{rOrientation:e}=this.$.DATA;this.$$transition.setName(["r-visible-animate",e].filter(Boolean).join("-")+"-"),this.$.setClass((()=>[e&&"r-visible-animate-"+e])),this.$$transition.visible(this.$$visible)}}customElements.define("r-visible-animate",RVisibleAnimate);class RDialog extends RainbowElement{static observedAttributes=this.$registerProps({"r-orientation":String});$$content;$$visible=!1;$$transition=Transition({node:this,name:"r-dialog-",className:"r-dialog-"});constructor(...e){super(...e)}open(){this.$$visible=!0,this.$$transition.show()}close(){this.$$visible=!1,this.$$transition.hide()}$$setClass(){const{rOrientation:e}=this.$.DATA;this.$.setClass((()=>[e&&"r-dialog-"+e,!0===this.$$visible&&"r-dialog-show",!1===this.$$visible&&"r-dialog-hide"]))}$render(){const{rOrientation:e}=this.$.DATA;this.$$transition.setName(["r-dialog",e].filter(Boolean).join("-")+"-"),this.$.setClass((()=>[e&&"r-dialog-"+e])),this.$$transition.visible(this.$$visible)}}class RFalls extends RainbowElement{static observedAttributes=this.$registerProps({"r-min-auto-width":Number,"r-columns":{type:Number,default:2},"r-gap":{type:Number,default:0},"r-row-gap":{type:Number,default:0},"r-column-gap":{type:Number,default:0}});$onRegisterIMPS(){return[treeObserverIMP({onWidthChange(){this.$debouncedRender(this.$?.data)},onChildrenSizeChange(){this.$debouncedRender(this.$?.data)}})]}$render(){let{rMinAutoWidth:e,rColumns:t,rGap:i,rRowGap:s,rColumnGap:n}=this.$.DATA;const r=(()=>e?Math.floor(this.offsetWidth/e):t)();let o=n||i,l=s||i,a=e=>`calc( ${100/r*e}% - ${(r-1)*o/r*e}px + ${e*o}px )`;const c=arrayLoopMap(r,(e=>({height:0,left:a(e),top:0,index:e})));let h=`calc( ${100/r}% - ${(r-1)*o/r}px )`;Array.from(this.children).forEach((e=>{e.classList.add("r-falls-item"),e.style.width=h;let t=getMinHeightItem$1(c);t.height&&(t.height=t.height+l),e.style.left=t.left,e.style.top=t.height+"px",t.height=t.height+e.offsetHeight})),this.style.height=getMaxHeightItem$1(c).height+"px"}}function getMinHeightItem$1(e){let t=e[0];return e.forEach((e=>{e.height<t.height&&(t=e)})),t}function getMaxHeightItem$1(e){let t=e[0];return e.forEach((e=>{e.height>t.height&&(t=e)})),t}class RGrid extends RainbowElement{static observedAttributes=this.$registerProps({"r-columns":{type:Number,default:1},"r-min-auto-width":Number,"r-gap":[Number,String],"r-row-gap":[Number,String],"r-column-gap":[Number,String],"r-grid-wrap":String,"r-grid-stretch":String});$onRegisterIMPS(){return[resizeObserverIMP({isOnlyResizeWidth:!0})]}$render(){const{rGap:e,rRowGap:t,rColumnGap:i}=this.$.DATA;this.$.setStyle((()=>[{"grid-template-columns":`repeat(${this.$$columns}, 1fr)`,"grid-gap":e+"px","row-gap":(t||e)+"px","column-gap":(i||e)+"px"}])),this.$$doLayout()}get $$columns(){let{rColumns:e,rMinAutoWidth:t}=this.$.DATA;return t?Math.floor(this.offsetWidth/t):e}$$doLayout(){const{rGridWrap:e,rGridStretch:t}=this.$.DATA;let i=Array.from(this.children),s=i.map((e=>1*e.getAttribute("grid-column")||1)),n=1,r=[],o=this.$$columns+1;s.forEach(((i,s)=>{let l=n+i;if("wrap"===e){if(l>o){"stretch"===t&&r[s-1]&&(r[s-1].end=o),n=1;let e=n+i;l=e>o?o:e}}else l>o&&(l=o);r.push({start:n,end:l,index:s}),n+=i,n>this.$$columns&&(n=1)})),i.forEach(((e,t)=>{e.classList.add("r-grid-item"),e.style["grid-column-start"]=r[t].start,e.style["grid-column-end"]=r[t].end}))}}class RScroll extends RainbowElement{$$={default:document.createElement("div"),top:document.createElement("div"),content:document.createElement("div"),prveScrollTop:0,onScroll:e=>{e.scrollTop=this.$$.default.scrollTop,e.moveY=this.$$.prveScrollTop-this.$$.default.scrollTop,e.moveY<0&&this.dispatchEvent(createCustomEvent("scrollUp",e)),this.onscroll&&this.onscroll(e),this.dispatchEvent(createCustomEvent("scroll",e)),e.moveY>0&&this.dispatchEvent(createCustomEvent("scrollDown",e)),this.$$.prveScrollTop=this.$$.default.scrollTop},disabledScroll:()=>{this.$$.default.classList.add("r-scroll-element-disabled-scroll")},unDisabledScroll:()=>{this.$$.default.classList.remove("r-scroll-element-disabled-scroll")}};$slotContainer={default:this.$$.default,top:this.$$.top};get scrollTop(){return this.$$.default?.scrollTop}set scrollTop(e){this.$$.default.scrollTop=e}scrollBy(...e){this.$$.default?.scrollBy?.(...e)}scrollTo(...e){this.$$.default?.scrollTo?.(...e)}constructor(...e){super(...e),this.$$.default.addEventListener("scroll",this.$$.onScroll)}disconnectedCallback(...e){super.disconnectedCallback(...e),this.$$.default.removeEventListener("scroll",this.$$.onScroll)}connectedCallback(...e){super.connectedCallback(...e),this.$$.top.classList.add("r-scroll-top"),this.$$.content.classList.add("r-scroll-content"),this.$$.default.classList.add("r-scroll-element"),this.$$.content.append(this.$$.default),this.$.append(this.$$.top),this.$.append(this.$$.content),this.$$.prveScrollTop=this.$$.default.scrollTop}}class RScrollRefresh extends RainbowElement{static observedAttributes=this.$registerProps({"r-refresh-heignt":{type:String,default:"0"},"r-max-refresh-heignt":{type:String,default:"0"},"r-min-time":{type:String,default:"500"}});onrefresh(){}$$renderRefresh(){const e=document.createElement("r-circle");e.classList.add("r-scroll-refresh-circle");const t=document.createElement("i");t.classList.add("loading-icon","iconfont","r-scroll-refresh-loading"),t.innerHTML="&#xe607;";const i=document.createElement("div");i.classList.add("r-scroll-refresh-text"),this.$.append(e),this.$.append(t),this.$.append(i);const s=()=>{this.$$.loading?(t.classList.remove("r-scroll-refresh-loading-hide"),e.classList.add("r-scroll-refresh-circle-hide")):(t.classList.add("r-scroll-refresh-loading-hide"),e.classList.remove("r-scroll-refresh-circle-hide"))};return s(),()=>{s();const{rRefreshHeignt:t}=this.$.DATA;e.value=this.$$.height/t*100,i.innerText=(()=>this.$$.loading?"正在刷新":this.$$.release?"释放刷新":"下拉刷新")()}}$$={createPromise:()=>new Promise((e=>{this.$$.resolve=e})),resolve:()=>0,promise:void 0,scrollParent:this.$.findParentByLocalName(["r-scroll","r-nested-scroll"]),loading:!1,DATA:this.$.DATA,get release(){const{rRefreshHeignt:e}=this.DATA;return this.height>e},render:()=>{},pointerdownEvent:void 0,touchstartEvent:void 0,lock:!1,height:0,pointerdown:e=>{!0!==this.$$.loading&&(this.$$.pointerdownEvent=e,this.$$.lock=!1)},pointermove:e=>{if(!0===this.$$.loading)return;const t=e.pageY-this.$$.pointerdownEvent.pageY,{scrollParent:i}=this.$$;if(i.scrollTop>0)return i.removeEventListener("pointermove",this.$$.pointermove),void(this.$$.lock=!1);t>=8&&i.scrollTop<=0&&(this.$$.lock=!0)},touchstart:e=>{!0!==this.$$.loading&&(this.$$.touchstartEvent=e.touches[0])},touchmove:e=>{if(!0===this.$$.loading)return;if(!this.$$.lock)return;const{rMaxRefreshHeignt:t}=this.$.DATA;let i=e.touches[0].pageY-this.$$.touchstartEvent.pageY;e.stopImmediatePropagation(),e.preventDefault(),i<0&&(i=0),this.classList.remove("r-scroll-refresh-transition"),this.$$.height=i/(t/2+i)*t,e.refreshHeight=this.$$.height,this.style.height=this.$$.height+"px",this.$$.render()},touchend:async e=>{if(!0===this.$$.loading)return;if(!this.$$.lock)return;const{scrollParent:t}=this.$$,{rRefreshHeignt:i,rMinTime:s}=this.$.DATA;this.classList.add("r-scroll-refresh-transition");const n=this.$$.release;this.$$.height=n?i:0,this.$$.lock=!1,e.refreshHeight=this.$$.height,this.style.height=this.$$.height+"px",this.$$.render(),n&&(this.$$.loading=!0,this.$$.render(),t.$$.disabledScroll(),this.$$.promise=this.$$.createPromise(),e.resolve=this.$$.resolve,this.dispatchEvent(createCustomEvent("refresh",e)),await Promise.allSettled([setTimeoutPromise(s,!0),this.onrefresh(),this.$$.promise].filter(Boolean)),this.$$.height=0,e.refreshHeight=this.$$.height,this.$$.loading=!1,this.style.height=this.$$.height+"px",this.$$.render(),t.$$.unDisabledScroll())}};constructor(...e){super(...e)}connectedCallback(...e){super.connectedCallback(...e),this.classList.add("r-scroll-refresh"),this.$$.scrollParent=this.$.findParentByLocalName(["r-scroll","r-nested-scroll"]);const{scrollParent:t}=this.$$,i={passive:!1,capture:!0};t.addEventListener("pointerdown",this.$$.pointerdown,i),t.addEventListener("pointermove",this.$$.pointermove,i),t.addEventListener("touchstart",this.$$.touchstart),t.addEventListener("touchmove",this.$$.touchmove),t.addEventListener("touchend",this.$$.touchend),this.$$.render=this.$$renderRefresh()}disconnectedCallback(...e){super.connectedCallback(...e);const{scrollParent:t}=this.$$;t.removeEventListener("pointerdown",this.$$.pointerdown),t.removeEventListener("pointermove",this.$$.pointermove),t.removeEventListener("touchstart",this.$$.touchstart),t.removeEventListener("touchmove",this.$$.touchmove),t.removeEventListener("touchend",this.$$.touchend)}}class RScrollMemoryBubble extends RainbowElement{static observedAttributes=this.$registerProps({"r-orientation":{type:String,default:"right"},"r-init-visibility":{type:String,default:"visible"},"r-visible-distance":{type:String,default:"100px"},"r-visible-reversal":String});$$visible=!0;$$cacheMoveY=0;$$scrollParent;connectedCallback(...e){super.connectedCallback(...e),this.$$visible="visible"===this.$.DATA.rInitVisibility,this.$$scrollParent=this.$.findParentByType("RScroll"),this.$$scrollParent.addEventListener("scrollUp",this.$$setVisibleFalse.bind(this)),this.$$scrollParent.addEventListener("scrollDown",this.$$setVisibleTrue.bind(this))}disconnectedCallback(...e){super.connectedCallback(...e),this.$$scrollParent.removeEventListener("scrollUp",this.$$setVisibleFalse.bind(this)),this.$$scrollParent.removeEventListener("scrollDown",this.$$setVisibleTrue.bind(this))}$$setClass(){const{rOrientation:e}=this.$.DATA;this.$.setClass((()=>["r-scroll-memory-bubble-"+e,this.$$visible?"r-scroll-memory-bubble-visible":"r-scroll-memory-bubble-hide",this.$$visible?`r-scroll-memory-bubble-visible-${e}`:`r-scroll-memory-bubble-hide-${e}`]))}$$setVisibleTrue(e){if(!0===this.$$visible)return this.$$cacheMoveY=0;this.$$cacheMoveY=this.$$cacheMoveY+Math.abs(e.moveY),this.$$cacheMoveY>=this.$.DATA.rVisibleDistance&&(this.$$cacheMoveY=0,this.$$visible=!0,this.$$setClass())}$$setVisibleFalse(e){if(!1===this.$$visible)return this.$$cacheMoveY=0;this.$$cacheMoveY=this.$$cacheMoveY+Math.abs(e.moveY),this.$$cacheMoveY>=this.$.DATA.rVisibleDistance&&(this.$$cacheMoveY=0,this.$$visible=!1,this.$$setClass())}$render(){this.$$setClass()}}class RScrollSticky extends RainbowElement{static observedAttributes=this.$registerProps({top:Number,bottom:Number,"r-scroll-anima":Number,"r-active-top":Number,"r-opacity-ani":Boolean,"r-opacity-top":Number,"r-visible-ani":Boolean,"r-visible-top":Number,"r-opacity-delay":{type:Number,default:0}});$$isSticky=!1;$$isStickyTop=!1;$$isStickyBottom=!1;$$isStickyAct=!1;$$scrollParent;$$opacity;$$display;$render(){console.log(this.$.data)}$bindClass(){}$bindStyle(){}connectedCallback(...e){super.connectedCallback(...e),this.$$scrollParent=this.$.findParentByType("RScroll"),this.$$initTop=this.$.getOffsetTop(this.$$scrollParent),this.$$onScroll(),this.$$scrollParent.addEventListener("scroll",this.$$onScroll.bind(this))}disconnectedCallback(...e){super.connectedCallback(...e),this.$$scrollParent.removeEventListener("scroll",this.$$onScroll.bind(this))}$$onScroll(e){console.log("onScroll",e)}}const COMPUTE_INTERVAL=30;let currentView=document.createElement("div"),srcViews=[],timer;const customEventNameMap=new Map,compute={isGetPdownLock:!1,srcViews:[]};class SlideEvent extends CustomEvent{altKey=void 0;altitudeAngle=void 0;azimuthAngle=void 0;button=void 0;buttons=void 0;clientX=void 0;clientY=void 0;ctrlKey=void 0;currentTime=void 0;deltaAng=void 0;deltaC=void 0;deltaTime=void 0;deltaX=void 0;deltaY=void 0;direction=void 0;fromElement=void 0;getModifierState=void 0;getPredictedEvents=void 0;height=void 0;initMouseEvent=void 0;initUIEvent=void 0;isPrimary=void 0;layerX=void 0;layerY=void 0;metaKey=void 0;moveX=void 0;moveY=void 0;movementX=void 0;movementY=void 0;offsetX=void 0;offsetY=void 0;orientation=void 0;pageX=void 0;pageY=void 0;persistentDeviceId=void 0;pointerId=void 0;pointerType=void 0;pressure=void 0;relatedTarget=void 0;screenX=void 0;screenY=void 0;shiftKey=void 0;sourceCapabilities=void 0;speedX=void 0;speedY=void 0;srcViews=void 0;tangentialPressure=void 0;tiltX=void 0;tiltY=void 0;toElement=void 0;twist=void 0;velocityX=void 0;velocityY=void 0;view=void 0;which=void 0;width=void 0;x=void 0;y=void 0;constructor(e,t={}){super(e,t)}}function extendedSlideEvents(e=document.createElement("div"),t={}){function i(t,i){e.$$&&(e.$$[t]=i)}function s(e){i("parentViews",[...srcViews]),srcViews.push(e.currentTarget),i("srcViews",[...srcViews]),compute.isGetPdownLock=!1}function n(e){compute.isGetPdownLock||(compute.srcViews=[...srcViews],currentView=srcViews.at(-1),srcViews=[],compute.isGetPdownLock=!0),i("slideEventViews",[...compute.srcViews])}return{bindEvents:function(){e.addEventListener("pointerdown",s,{passive:!1,capture:!0}),e.addEventListener("pointerdown",n);let r={customEventName:"",direction:"",...t};r.customEventName&&(customEventNameMap.set(r.customEventName,r.customEventName),i("slideCustomEventName",r.customEventName))},destroy:function(){e.removeEventListener("pointerdown",s,{passive:!1,capture:!0}),e.removeEventListener("pointerdown",n)}}}function undefinedReturn(e,t){return isNaN(e)||void 0===e?t:e}function inheritPointerEvent(e,t={},i={bubbles:!0,cancelable:!0}){const s=new SlideEvent(e,i);for(const e in t)try{void 0===s[e]&&(s[e]=t[e])}catch(e){console.warn(e)}return s}function calcHypotenuse(e,t){return Math.sqrt(e*e+t*t)}function calculateAngle(e,t){return 360-(Math.atan2(t,e)*(180/Math.PI)+360)%360}(()=>{document.addEventListener("pointerdown",(function(h){clearTimeout(timer),a(h),c("slideDown",h),e=h,t=h,i=h,r=!1,o=!0,s=void 0,n=void 0,l=[]})),document.addEventListener("pointermove",(function(e){if(clearTimeout(timer),a(e),t=e,!r){if(e.deltaC>8){const t=e.deltaAng,i=315<=t||t<45,o=45<=t&&t<135,l=135<=t&&t<225,a=225<=t&&t<315;return i&&(s="right"),o&&(s="top"),l&&(s="left"),a&&(s="bottom"),(i||l)&&(n="horizontal"),(o||a)&&(n="vertical"),void(r=!0)}return}if(o)return c("slideStrat",e),e.moveX<0&&c("slideRightStrat",e),e.moveY<0&&c("slideBottomStrat",e),e.moveX>0&&c("slideLeftStrat",e),e.moveY>0&&c("slideTopStrat",e),0!==e.moveX&&c("slideHorizontalStrat",e),0!==e.moveY&&c("slideVerticalStrat",e),void(o=!1);c("slideMove",e),e.moveX<0&&c("slideRight",e);e.moveY<0&&c("slideBottom",e);e.moveX>0&&c("slideLeft",e);e.moveY>0&&c("slideTop",e);0!==e.moveX&&c("slideHorizontal",e);0!==e.moveY&&c("slideVertical",e);c("slideAfterMove",e),timer=setTimeout((()=>{i=e}),COMPUTE_INTERVAL)})),document.addEventListener("pointerup",(function(e){clearTimeout(timer),a(e),r&&(c("slideEnd",e),e.velocityX<0&&c("slideRightEnd",e),e.velocityY<0&&c("slideBottomEnd",e),e.velocityX>0&&c("slideLeftEnd",e),e.velocityY>0&&c("slideTopEnd",e),0!==e.velocityX&&c("slideHorizontalEnd",e),0!==e.velocityY&&c("slideVerticalEnd",e),c("slideAfterEnd",e));c("slideUp",e),currentView=void 0}));let e,t,i,s,n,r=!1,o=!0,l=[];function a(r){if(l.push(r.pressure),r.srcViews=compute.srcViews,r.currentTime=Date.now(),r.direction=s,r.orientation=n,e&&(r.deltaX=r.pageX-(e?.pageX??0),r.deltaY=r.pageY-(e?.pageY??0),r.deltaC=calcHypotenuse(r.deltaX,r.deltaY),r.deltaAng=calculateAngle(r.deltaX,r.deltaY),t&&(r.moveX=(t?.pageX??0)-r.pageX,r.moveY=(t?.pageY??0)-r.pageY,r.deltaTime=r.currentTime-(t?.currentTime??0),r.speedX=r.moveX/r.deltaTime,r.speedY=r.moveY/r.deltaTime,i&&(r.velocityX=undefinedReturn(i.velocityX,r.speedX),r.velocityY=undefinedReturn(i.velocityY,r.speedY),r.currentTime-i.currentTime>=COMPUTE_INTERVAL)))){let e=1;const t=(i?.pageX??0)-r.pageX,s=(i?.pageY??0)-r.pageY,n=r.currentTime-(i?.currentTime??0);r.velocityX=Number((t/n*e).toFixed(2)),r.velocityY=Number((s/n*e).toFixed(2)),i=r,l=[]}}function c(e,t){if(!currentView)return;const i=inheritPointerEvent(e,t);currentView.dispatchEvent(i),customEventNameMap.forEach((i=>{const s=inheritPointerEvent(e.replace(/(Slide|slide)/,i),t);currentView.dispatchEvent(s)}))}})();class ScrollEvent extends SlideEvent{scrollTop=void 0}function inheritSlideEvent(e,t={},i={bubbles:!0,cancelable:!0}){const s=new ScrollEvent(e,i);for(const e in t)try{void 0===s[e]&&(s[e]=t[e])}catch(e){console.warn(e)}return s}const LOG=(...e)=>console.log(...e);class RNestedScroll extends RainbowElement{static observedAttributes=this.$registerProps({"r-scroll-direction":String});$slotContainer={default:document.createElement("div")};$$={nestedChild:void 0,nestedChildren:[],nestedParent:void 0,setNestedChild:()=>{if(1===this.$$.nestedChildren.length)return void(this.$$.nestedChild=this.$$.nestedChildren[0]);if(!this.$$.nestedChildren.length)return;const e=this.getBoundingClientRect();this.$$.nestedChild=this.$$.nestedChildren.find((t=>{const i=t.getBoundingClientRect();return i.left-e.left>=-1&&i.right<=e.right+1}))},captureOptions:{passive:!1,capture:!0},slideEvent:extendedSlideEvents(this,{}),scrollEvent:setup({scrollEl:this,container:this.$slotContainer.default}),disabledScroll:()=>{},unDisabledScroll:()=>{}};constructor(...e){super(...e)}connectedCallback(...e){super.connectedCallback(...e),this.$.appendChild(this.$slotContainer.default),this.$$.nestedParent=this.$.findParentByLocalName(["r-nested-scroll"]),this.$$.nestedParent&&this.$$.nestedParent.$$.nestedChildren.push(this),this.$$.setNestedChild(),this.$slotContainer.default.classList.add("r-nested-scroll-content"),this.classList.add("r-nested-scroll"),this.$$.slideEvent.bindEvents(),this.$$.scrollEvent.bindEvents()}disconnectedCallback(...e){super.disconnectedCallback(...e),this.$$.nestedParent&&arrayRemove(this.$$.nestedParent.$$.nestedChildren,this),this.$$.slideEvent.destroy(),this.$$.scrollEvent.destroy()}}function setup(e){const{scrollEl:t,container:i,view:s=t}=e;let n,r;const o=20;let l=()=>t.offsetHeight+Math.ceil(t.scrollTop)>=i.offsetHeight,a=()=>t.scrollTop<=0,c=()=>i.offsetHeight-t.offsetHeight,h=()=>t.offsetWidth+t.scrollLeft>=i.offsetWidth,d=()=>t.scrollLeft<=0,$=()=>i.offsetWidth-t.offsetWidth,u=()=>s.$.findParentByLocalName(["r-nested-scroll"]),m=(e,t="vertical")=>!e.srcViews.every((e=>e.$.DATA.rScrollDirection===t))&&e.orientation!==t;function v(e){m(e,"vertical")||l()||(e.stopPropagation(),C(e.moveY,e))}function p(e){m(e,"vertical")||a()||(e.stopPropagation(),b(e.moveY))}function g(e){m(e,"vertical")||l()||(e.stopPropagation(),E(e.velocityY,e))}function f(e){m(e,"vertical")||a()||(e.stopPropagation(),A(e.velocityY,e))}function b(e,i){let n=t.scrollTop+e;n<0&&(n=0),t.scrollTop=n,s.dispatchEvent(y("scrollDown",i)),s.dispatchEvent(y("scrollChange",i)),a()&&s.dispatchEvent(y("scrollTop",i))}function y(e,s={}){return inheritSlideEvent(e,{...s,scrollTop:t.scrollTop,scrollHeight:t.offsetHeight,containerHeight:i.offsetHeight,space:s?.moveY})}function C(e,i={}){let n=t.scrollTop+e;n>c()&&(n=c()+2),t.scrollTop=n,s.dispatchEvent(y("scrollUp",i)),s.dispatchEvent(y("scrollChange",i)),l()&&s.dispatchEvent(y("scrollBottom",i))}function E(e,t){n?.stop?.(),n=cAni({velocity:e,onanimation(e){const i=Math.ceil(e*o);i>0&&(C(i,t),l()&&(n?.stop?.(),LOG("滚动停止 到底停止"),s.$$.nestedChild?.$$?.scrollEvent?.dispatchScrollTopFlying?.(e,t)))},onanimationEnd(e){LOG("滚动停止 scrollEnd "),s.dispatchEvent(y("scrollEnd",t))}}),n.start()}function A(e,t){n?.stop?.(),n=cAni({velocity:e,onanimation(e){const i=Math.ceil(e*o);i<0&&(b(i,t),a()&&(n?.stop?.(),LOG("滚动停止 到顶部停止"),u()?.$$?.scrollEvent?.dispatchScrollBottomFlying?.(e,t)))},onanimationEnd(e){LOG("滚动停止"),s.dispatchEvent(y("scrollEnd",t))}}),n.start()}function L(e){if("horizontal"!==e.orientation)return;if(h())return;e.stopPropagation();let i=t.scrollLeft+e.moveX;i>$()&&(i=$()+2),t.scrollLeft=i,s.$$.setNestedChild()}function w(e){if("horizontal"!==e.orientation)return;if(d())return;e.stopPropagation();let i=t.scrollLeft+e.moveX;i<0&&(i=0),t.scrollLeft=i,s.$$.setNestedChild()}function T(e){x(e)}function S(e){x(e)}function x(e){if("horizontal"!==e.orientation)return;if(h())return;if(d())return;e.stopPropagation();const i=t.scrollLeft,n=Math.floor(i/t.offsetWidth),o=Math.round(i/t.offsetWidth);let l=o;e.velocityX>.4&&(l=n+1),e.velocityX<-.4&&(l=n),console.log(n,o);const a=t.offsetWidth*l;r=Animation({from:i,to:a,avg:30,onanimation(e){t.scrollLeft=e,s.$$.setNestedChild()},onanimationend(){}}),r.start()}return{bindEvents:function(){const{rScrollDirection:e}=t.$.DATA,i={passive:!0,capture:!1},s={passive:!0,capture:!0};console.log("rScrollDirection",e),"vertical"===e&&(t.addEventListener("slideTop",v,s),t.addEventListener("slideBottom",p,i),t.addEventListener("slideTopEnd",g,s),t.addEventListener("slideBottomEnd",f,i)),"horizontal"===e&&(t.addEventListener("slideLeft",L,i),t.addEventListener("slideRight",w,i),t.addEventListener("slideLeftEnd",T,i),t.addEventListener("slideRightEnd",S,i))},destroy:function(){},dispatchScrollTopFlying:E,dispatchScrollBottomFlying:A}}function cAni(e={}){let t;const i={velocity:0,deceleration:.04,onanimation:()=>{},onanimationEnd:()=>{},...e};let s=!1;const n=i.velocity<0;function r(){if(s)return cancelAnimationFrame(t);t=requestAnimationFrame((()=>s?cancelAnimationFrame(t):(i.velocity=Number((i.velocity+i.deceleration).toFixed(3)),i.velocity>0&&(i.velocity=0),i.velocity>=0?(a(),void i.onanimationEnd(i.velocity)):s?cancelAnimationFrame(t):(i.onanimation(i.velocity),void r()))))}function o(){if(s)return cancelAnimationFrame(t);t=requestAnimationFrame((()=>s?cancelAnimationFrame(t):(i.velocity=Number((i.velocity-i.deceleration).toFixed(3)),i.velocity<0&&(i.velocity=0),i.velocity<=0?(a(),void i.onanimationEnd(i.velocity)):s?cancelAnimationFrame(t):(i.onanimation(i.velocity),void o()))))}function l(){n?r():o()}function a(){s=!0,cancelAnimationFrame(t)}return{start:function(){s=!1,l()},stop:a}}function Animation(e={}){let t,i=!1;const s={from:0,to:300,avg:10,duration:500,onanimationend:()=>{},onanimation:()=>{},...e};let n=s.from;function r(){i=!0,cancelAnimationFrame(t)}return{start:function e(){if(i)return cancelAnimationFrame(t);t=requestAnimationFrame((()=>{if(i)return cancelAnimationFrame(t);(s.from<s.to&&(n+=s.avg,n>=s.to&&(n=s.to),s.onanimation(n),n>=s.to)||s.from>s.to&&(n-=s.avg,n<=s.to&&(n=s.to),s.onanimation(n),n<=s.to))&&(s.onanimationend(n),r()),e()}))},stop:r}}class RRollingTextNum extends RainbowElement{static observedAttributes=this.$registerProps({"r-initial-animation":String,"r-transition":String});$$container=document.createElement("span");$$measure=document.createElement("span");$$rotes=arrayLoopMap(10,(()=>document.createElement("span")));$$num=10;$$value=0;$$isMonted=!1;get $$deg(){return 360/this.$$num}get value(){return this.$$value}set value(e){this.$$value=e,console.log("set ------ value",e),this.$$rotateX(!0),console.log("set value",e)}$$renderNums(){const e=this.$$deg,t=(Math.sin(Math.PI/180*e)+.9)*(this.$$measure.offsetHeight||1);this.$$rotes.forEach(((i,s)=>{i.style.transform=`rotateX(${e*s}deg)  translateZ(${t}px)`,i.setAttribute("part","r-rolling-num-rotate"),i.className="r-rolling-num-rotate",i.innerText=s,this.$$container.appendChild(i)}))}async $$rotateX(e){const{rTransition:t,rInitialAnimation:i}=this.$.DATA,s=-this.$$value/this.$$num*360;let n=-Math.round((s-180)%360/36);this.$$rotes.forEach(((e,t)=>{let i="r-rolling-num-rotate";n===t&&(i="r-rolling-num-rotate r-rolling-num-rotate-unact"),(n-1<0?9:n-1)===t&&(i="r-rolling-num-rotate r-rolling-num-rotate-unprve"),(n+1>9?0:n+1)===t&&(i="r-rolling-num-rotate r-rolling-num-rotate-unnext"),e.setAttribute("part",i),e.className=i})),this.$$container.style.transition=t,this.$$container.style.transform=`rotateX(${s}deg)`}connectedCallback(...e){super.connectedCallback(...e);const{rTransition:t,rInitialAnimation:i}=this.$.DATA;this.$$container.className="r-rolling-num-container r-rolling-num-container-ani",this.$$container.setAttribute("part","r-rolling-num-container r-rolling-num-container-ani "),this.$$measure.className="r-rolling-num-measure",this.$$measure.setAttribute("part","r-rolling-num-measure"),this.$$measure.innerText="9",this.$$container.appendChild(this.$$measure),this.appendChild(this.$$container),this.$$renderNums(),this.$$rotateX("true"===i),this.$$isMonted=!0}disconnectedCallback(...e){super.connectedCallback(...e)}}class RRollingText extends RainbowElement{static observedAttributes=this.$registerProps({"r-math-type":String});$$renderNumNodes=renderChildren({parentNode:this});$$={value:""};get value(){return this.$$.value}set value(e){this.$$.value=e,this.$debouncedRender()}$render(){let{rMathType:e}=this.$.DATA,t=this.value;console.log("rValue $render",t);let i=arrayLoopMap(String(t).length,(i=>{const s=Number([1,...arrayLoopMap(i,(()=>0))].join(""));return"floor"===e?Math.floor(t/s):t/s}));this.$$renderNumNodes.renderList(i,{keyExtractor:(e,t)=>t,onCreateNode:(e,t,i)=>{let s=document.createElement("r-rolling-text-num");return s.setAttribute("key",i),s.value=e,s},onCacheNode:(e,t,i,s)=>(e.value=t,e.setAttribute("key",s),e)})}}class RCircle extends RainbowElement{static observedAttributes=this.$registerProps({"r-start-angle":String,"r-outer-radius":String,"r-inner-radius":String,"r-origin-x":String,"r-origin-y":String,"r-stroke-width":String,"r-layer-stroke-width":String,"r-direction":String,"r-range-max":String,"r-range-min":String});$onRegisterIMPS(){return[resizeObserverIMP()]}$slotContainer={default:document.createElement("div")};connectedCallback(...e){super.connectedCallback(...e),this.$$.borderDiv.classList.add("r-circle-border"),this.$$.layerDiv.classList.add("r-circle-layer"),this.$slotContainer.default.classList.add("r-circle-content"),this.$.append(this.$$.layerDiv),this.$.append(this.$$.borderDiv),this.$.append(this.$slotContainer.default)}$$={borderDiv:document.createElement("div"),layerDiv:document.createElement("div"),value:0,toRadians:e=>e*Math.PI/180,getAngleDiff:(e,t)=>{if(t===e)return 0;let i=(t-e+360)%360;return 0===i?360:i},clockwise:{anglePosition:(e,t,i,s)=>{const n=this.$$.toRadians(e);return{angle:n,x:t+s*Math.cos(n),y:i+s*Math.sin(n)}},arcTo:(e,t,i,s,n,r=!1)=>{n!==s&&(n-s+360)%360==0&&(n-=.001);const o=this.$$.clockwise.anglePosition(s,e,t,i),l=this.$$.clockwise.anglePosition(n,e,t,i),a=this.$$.getAngleDiff(s,n)>180?1:0;return r?{start:l,end:o,largeArcFlag:a,sweepFlag:0}:{start:o,end:l,largeArcFlag:a,sweepFlag:1}}},anticlockwise:{anglePosition:(e,t,i,s)=>{const n=this.$$.toRadians(e);return{angle:n,x:t+s*Math.sin(n),y:i+s*Math.cos(n)}},arcTo:(e,t,i,s,n,r=!1)=>{n!==s&&(n-s+360)%360==0&&(n-=.001);const o=this.$$.anticlockwise.anglePosition(s,e,t,i),l=this.$$.anticlockwise.anglePosition(n,e,t,i),a=this.$$.getAngleDiff(s,n)>180?1:0;return r?{start:l,end:o,largeArcFlag:a,sweepFlag:1}:{start:o,end:l,largeArcFlag:a,sweepFlag:0}}},arcTo:(e,t,i,s,n,r,o)=>o?this.$$[o].arcTo(e,t,i,s,n,r):this.$$.clockwise.arcTo(e,t,i,s,n,r),getRangeValue:(e,t)=>{if("string"==typeof this.value&&/\d+?%/.test(this.value))return parseInt(this.value.replace(/%/,""),10)/100*360;if("number"!=typeof e||"number"!=typeof t)return this.value;let i=this.value;return this.value<e&&(i=e),this.value>t&&(i=t),i/(t-e)*360},getAnnulusPath:(e,t,i,s,n,r,o)=>{const l=this.$$.arcTo(e,t,i,n,r,!1,o),a=this.$$.arcTo(e,t,s,n,r,!0,o);return`path('${[`M ${l.start.x} ${l.start.y}`,`A ${i} ${i} 0 ${l.largeArcFlag} ${l.sweepFlag} ${l.end.x} ${l.end.y}`,`L ${a.start.x} ${a.start.y}`,`A ${s} ${s} 0 ${a.largeArcFlag} ${a.sweepFlag} ${a.end.x} ${a.end.y}`,`L ${l.start.x} ${l.start.y}`,"Z"].join(" ")}')`},getcirclePath:(e,t,i,s,n,r)=>{const o=this.$$.arcTo(e,t,i,s,n,!1,r);return`path('${[`M ${o.start.x} ${o.start.y}`,`A ${i} ${i} 0 ${o.largeArcFlag} ${o.sweepFlag} ${o.end.x} ${o.end.y}`,"Z"].join(" ")}')`}};get value(){return this.$$.value}set value(e){this.$$.value=e,this.$debouncedRender()}$render(){let{rStartAngle:e,rOuterRadius:t,rInnerRadius:i,rOriginX:s,rOriginY:n,rStrokeWidth:r,rDirection:o,rLayerStrokeWidth:l,rRangeMin:a,rRangeMax:c}=this.$.DATA;"auto"===t&&(t=Math.min(this.offsetHeight,this.offsetWidth)/2),"auto"===i&&(i=t),t||(t=0),i||(i=0),s=this.$.resolvePercentum(s),n=this.$.resolvePercentumH(n),this.$$.borderDiv.style.clipPath=this.$$.getAnnulusPath(s,n,t-l,i-r-l,e,e+this.$$.getRangeValue(a,c),o),this.$$.layerDiv.style.clipPath=this.$$.getAnnulusPath(s,n,t,i-l-r-l,e,e+360,o),this.$slotContainer.default.style.clipPath=this.$$.getcirclePath(s,n,i-l-r-l,e,e+360,o)}}class RSvgCircle extends RainbowElement{static observedAttributes=this.$registerProps({"r-start-angle":String,"r-outer-radius":String,"r-inner-radius":String,"r-origin-x":String,"r-origin-y":String});$onRegisterIMPS(){return[resizeObserverIMP()]}$$={value:0};get value(){return this.$$.value}set value(e){this.$$.value=e,this.$debouncedRender()}$render(){}}class RTestD extends RainbowElement{$$={value:""};set value(e){this.$$.value=e,this.innerText=e}get value(){return this.$$.value}}class RScrollVirtualGridList extends RainbowElement{static observedAttributes=this.$registerProps({"r-columns":{type:Number,default:1},"r-min-auto-width":Number,"r-gap":[Number,String],"r-row-gap":[Number,String],"r-column-gap":[Number,String],"r-avg-height":[Number,String]});keyExtractor=e=>e.item;get $$columns(){let{rColumns:e,rMinAutoWidth:t}=this.$.DATA;return t?Math.floor(this.offsetWidth/t):e}$$={renderChildren:renderChildren({parentNode:this}),value:[],cache:{end:0,start:0},recycle:{divs:[]},createElement:()=>{let e=this.$$.recycle.divs.shift();return e||document.createElement("div")},scrollParent:void 0,onScroll:e=>{this.$$.layout(!1)},layout:(e=!0)=>{const{rAvgHeight:t,rGap:i,rColumnGap:s,rRowGap:n}=this.$.DATA,r=s||i||0,o=n||i||0,l=this.$.getOffsetTop(this.$$.scrollParent),a=this.$$.scrollParent.scrollTop;let c=Math.ceil(window.innerHeight/(t+r))*this.$$columns,h=Math.ceil((a-l)/(t+r))*this.$$columns-c,d=h<0?0:h,$=h+3*c;$<0&&($=0);let u=this.value.slice(d,$).map(((e,t)=>({index:d+t,item:e,data:e}))),m=!(this.$$.cache.start===d&&this.$$.cache.end===$);this.$$.cache.start=d,this.$$.cache.end=$,this.style.height=(t+r)*Math.ceil(this.value.length/this.$$columns)-r+"px",!1===e&&!1===m||this.$$.renderChildren.renderList(u,{keyExtractor:this.keyExtractor,onCreateNode:(e,i,s)=>{let n=this.$$.createElement();return n.setAttribute("key",s),n.classList.add("r-scroll-virtual-grid-list-item"),n.style.height=`${t}px`,n.style.position="absolute",this.$$.measure(n,e,t,o,r),this.dispatchEvent(createCustomEvent("renderList",{ele:n,...e,key:s})),n},onCacheNode:(e,i,s,n)=>(e.setAttribute("key",n),this.$$.measure(e,i,t,o,r),this.dispatchEvent(createCustomEvent("renderList",{ele:e,...i,key:n})),e),onRemoveNode:(e,t)=>{e.setAttribute("key",""),e.classList.remove("r-scroll-virtual-grid-list-item"),this.$$.recycle.divs.push(e)}})},measure:(e,t,i,s,n)=>{let r=this.$$columns,o=t.index%r,l=Math.floor(t.index/r);e.style.width=`calc( ${100/r}% - ${(r-1)*n/r}px )`,e.style.left=`calc( ${100/r*o}% - ${(r-1)*n/r*o}px + ${o*n}px )`,e.style.top=l*(i+s)+"px"},onValueChange:()=>{this.$$.layout()}};set value(e){e instanceof ListArray?(e.removeEventListener("change",this.$$.onValueChange),e.addEventListener("change",this.$$.onValueChange)):arrayRewriteFunction(e,(()=>this.$$.layout())),this.$$.value=e,this.$$.layout()}get value(){return this.$$.value}connectedCallback(...e){super.connectedCallback(...e),this.$$.scrollParent=this.$.findParentByLocalName("r-scroll"),this.$$.scrollParent.addEventListener("scroll",this.$$.onScroll.bind(this)),this.$$.layout()}disconnectedCallback(...e){super.disconnectedCallback(...e),this.$$.scrollParent.removeEventListener("scroll",this.$$.onScroll.bind(this))}}class ItemCache{list=[];width=void 0;height=void 0;left=void 0;top=void 0;vTop=void 0;bottom=void 0;vBottom=void 0}class RScrollVirtualFallsList extends RainbowElement{static observedAttributes=this.$registerProps({"r-columns":{type:Number,default:1},"r-min-auto-width":Number,"r-gap":[Number,String],"r-row-gap":[Number,String],"r-column-gap":[Number,String],"r-avg-height":[Number,String]});keyExtractor=e=>e.item;get $$columns(){let{rColumns:e,rMinAutoWidth:t}=this.$.DATA;return t?Math.floor(this.offsetWidth/t):e}$$={resizeObserver:new ResizeObserver((e=>{e.forEach((e=>{const t=getBoundingClientRect(e.target);e.target?.__bindData__?.__cache__&&(e.target.__bindData__.__cache__.height=t.height)})),this.$$.layout()})),renderChildren:renderChildren({parentNode:this}),value:[],preLoadIndex:0,cache:{start:void 0,end:void 0},createElement:()=>{let e=document.createElement("div");return this.$$.resizeObserver.observe(e),e},scrollParent:void 0,onScroll:e=>{this.$$.layout(!1)},findIndex:e=>arrayBinaryFindIndex(this.value,(t=>!!t.__cache__&&(t.__cache__.vTop<=e&&e<=t.__cache__.vBottom)),(t=>!!t.__cache__&&t.__cache__.vTop<e)),falls:{list:[]},getCssValues:()=>{const{rAvgHeight:e,rGap:t,rColumnGap:i,rRowGap:s}=this.$.DATA,n=i||t||0,r=s||t||0,o=this.$.getOffsetTop(this.$$.scrollParent),l=-window.innerHeight+o,a=2*window.innerHeight+o;return{scrollTop:this.$$.scrollParent.scrollTop,recycleBottom:a,recycleTop:l,offsetTop:o,rowGap:r,columnGap:n,rAvgHeight:e}},layout:(e=!0)=>{const{scrollTop:t,recycleBottom:i,recycleTop:s,rowGap:n}=this.$$.getCssValues();let r=this.$$.findIndex(t);-1===r&&(r=0);let o=r+30;o>this.value.length&&(o=this.value.length);let l=!(this.$$.cache.start===r&&this.$$.cache.end===o);if(this.$$.cache.start=r,this.$$.cache.end=o,this.$$.preLoadIndex=o,!1===e&&!1===l)return;let a=this.value[r];if(!a)return;let c=this.value.slice(r,o).map(((e,t)=>({index:r+t,item:e,data:e})));a.__cache__?this.$$.falls.list=a.__cache__.list:this.$$.falls.list=initList.call(this);let h=getMinHeightItem(this.$$.falls.list),d=new ItemCache;this.$$.renderChildren.renderList(c,{keyExtractor:this.keyExtractor,onCreateNode:(e,t,i)=>{let s=this.$$.createElement();return s.setAttribute("key",i),s.classList.add("r-scroll-virtual-falls-list-item"),s.style.position="absolute",this.dispatchEvent(createCustomEvent("renderList",{ele:s,...e,key:i})),s},onCacheNode:(e,t,i,s)=>(e.setAttribute("key",s),this.dispatchEvent(createCustomEvent("renderList",{ele:e,...t,key:s})),e),onBeforeInsertNode:(e,t,i)=>{h=getMinHeightItem(this.$$.falls.list),e.item.__cache__||(e.item.__cache__=new ItemCache),d=e.item.__cache__,d.list=this.$$.falls.list.map((e=>({...e})))},onInsertBeforeNode:(e,t,r,o)=>{h.height&&(h.height=h.height+n),e.style.width=h.width,e.style.left=h.left,e.style.top=h.height+"px";const l=getBoundingClientRect(e);d.height=l.height,d.width=e.offsetWidth,d.top=h.height,d.vTop=h.height+s,d.left=e.style.left,h.height=h.height+l.height,d.bottom=h.height,d.vBottom=h.height+i,d.calculateList=this.$$.falls.list.map((e=>({...e}))),e.__bindData__=t.item},onRemoveNode:(e,t)=>{e.setAttribute("key",""),this.$$.resizeObserver.unobserve(e)}}),this.$$.preLoads(),this.$$.setHeight(),this.$$.backstage.reStart()},setHeight:()=>{const e=this.value.at(-1)?.__cache__?.calculateList;if(e?.length)this.style.height=`${getMaxHeightItem(e).height}px`;else{const{rAvgHeight:e,columnGap:t}=this.$$.getCssValues();this.style.height=(e+t)*Math.ceil(this.value.length/this.$$columns)-t+"px"}},onValueChange:()=>{this.$$.layout()},preLoads:(e=100)=>{let t=this.value.length-this.$$.preLoadIndex;e>t&&(e=t),arrayLoop(e,(()=>{this.$$.preLoad(),this.$$.preLoadIndex++}))},preLoad:()=>{const e=this.value[this.$$.preLoadIndex];if(!e)return;const{scrollTop:t,recycleBottom:i,recycleTop:s,rowGap:n,rAvgHeight:r}=this.$$.getCssValues();let o=new ItemCache;e.__cache__||(e.__cache__=new ItemCache),o=e.__cache__,o.list=this.$$.falls.list.map((e=>({...e})));let l=getMinHeightItem(this.$$.falls.list);o.height||(o.height=r),l.height&&(l.height=l.height+n),o.top=l.height,o.vTop=l.height+s,o.left=l.left,o.width=l.width,l.height=l.height+o.height,o.bottom=l.height,o.vBottom=l.height+i,o.calculateList=this.$$.falls.list.map((e=>({...e})))},backstage:createBackstage((()=>{this.$$.preLoads(50),this.$$.setHeight()}),(()=>this.$$.preLoadIndex>=this.value.length))};set value(e){e instanceof ListArray?(e.removeEventListener("change",this.$$.onValueChange),e.addEventListener("change",this.$$.onValueChange)):arrayRewriteFunction(e,(()=>this.$$.layout())),this.$$.value=e,this.$$.layout()}get value(){return this.$$.value}connectedCallback(...e){super.connectedCallback(...e),this.$$.scrollParent=this.$.findParentByLocalName("r-scroll"),this.$$.scrollParent.addEventListener("scroll",this.$$.onScroll.bind(this)),this.$$.falls.list=initList.call(this)}disconnectedCallback(...e){super.disconnectedCallback(...e),this.$$.scrollParent.removeEventListener("scroll",this.$$.onScroll.bind(this)),this.$$.backstage.stop()}}function initList(){const e=this.$$columns||1,{rAvgHeight:t,rGap:i,rColumnGap:s,rRowGap:n}=this.$.DATA,r=s||i||0;return arrayLoopMap(e,(t=>({width:`calc( ${100/e}% - ${(e-1)*r/e}px )`,left:`calc( ${100/e*t}% - ${(e-1)*r/e*t}px + ${t*r}px )`,height:0,top:0,index:t})))}function getMinHeightItem(e){let t=e[0];return e.forEach((e=>{e.height<t.height&&(t=e)})),t}function getMaxHeightItem(e){let t=e[0];return e.forEach((e=>{e.height>t.height&&(t=e)})),t}function createBackstage(e,t){let i;function s(n){r(),t()||n.timeRemaining()>0&&(e(),n.didTimeout||(i=requestIdleCallback(s)))}function n(){i=requestIdleCallback(s)}function r(){cancelIdleCallback(i)}return{start:n,stop:r,reStart:function(){r(),n()}}}function getBoundingClientRect(e=document.createElement("div")){let t=e.getBoundingClientRect();return{height:Number(t.height.toFixed(2))}}class RFoldText extends RainbowElement{static observedAttributes=this.$registerProps({"r-max-line":Number});$slotContainer={default:document.createElement("span"),text:document.createElement("span"),end:document.createElement("span"),fold:document.createElement("span"),unfold:document.createElement("span")};$$={value:"",isFold:!1,foldText:"",rowHeight:0,click:()=>{if(!this.$$.foldText)return;const{text:e,default:t,end:i,fold:s,unfold:n}=this.$slotContainer;!0===this.$$.isFold&&(e.innerText=this.value),!1===this.$$.isFold&&(e.innerText=this.$$.foldText),this.$$.isFold=!this.$$.isFold;const r=t.getBoundingClientRect();this.style.height=r.height+"px",this.$$.isFold?(i.classList.add("r-fold-text-end-fold"),i.classList.remove("r-fold-text-end-unfold")):(i.classList.add("r-fold-text-end-unfold"),i.classList.remove("r-fold-text-end-fold"))},setInnerText:(e=0,t=0,i=0)=>{if(++e>this.value.length)return" ";const{text:s,default:n,end:r,fold:o,unfold:l}=this.$slotContainer,a=this.value.slice(0,e);s.innerText=a;const c=n.getBoundingClientRect();return i!==c.height&&(i=c.height,(t+=1)>2)?this.value.slice(0,e-1):this.$$.setInnerText(e,t,i)},draw:(e=0,t=0,i=0)=>{if(++e>this.value.length)return;const{text:s,default:n,end:r,fold:o,unfold:l}=this.$slotContainer,a=this.value.slice(0,e);s.innerText=a;const c=n.getBoundingClientRect();if(i!==c.height){if(i=c.height,(t+=1)>2)return this.style.height=this.rowHeight+"px",r.classList.remove("r-fold-text-end-none"),this.$$.foldText=this.$$.setInnerText(),s.innerText=this.$$.foldText,this.$$.isFold=!0,void(this.$$.isFold?(r.classList.add("r-fold-text-end-fold"),r.classList.remove("r-fold-text-end-unfold")):(r.classList.add("r-fold-text-end-unfold"),r.classList.remove("r-fold-text-end-fold")));this.rowHeight=i}this.$$.draw(e,t,i)}};set value(e){this.$$.value=e,this.$slotContainer.end.classList.add("r-fold-text-end-none"),this.$$.draw()}get value(){return this.$$.value}connectedCallback(...e){console.log("connectedCallback-connectedCallback"),super.connectedCallback(...e),this.addEventListener("click",this.$$.click.bind(this)),this.$slotContainer.default.classList.add("r-fold-text-default"),this.$slotContainer.text.classList.add("r-fold-text-text"),this.$slotContainer.end.classList.add("r-fold-text-end","iconfont"),this.$slotContainer.fold.classList.add("r-fold-text-end-fold-solt"),this.$slotContainer.unfold.classList.add("r-fold-text-end-unfold-solt"),this.$slotContainer.end.innerHTML||(this.$slotContainer.end.innerHTML="&#xe745;&#xe745;&#xe745"),this.$.append(this.$slotContainer.default),this.$slotContainer.default.append(this.$slotContainer.text),this.$slotContainer.default.append(this.$slotContainer.end),this.$slotContainer.default.append(this.$slotContainer.fold),this.$slotContainer.default.append(this.$slotContainer.unfold)}disconnectedCallback(...e){super.disconnectedCallback(...e),this.removeEventListener("click",this.$$.click.bind(this))}}var elements=Object.freeze({__proto__:null,RAbsolute:RAbsolute,RDialog:RDialog,RFalls:RFalls,RFoldText:RFoldText,RGrid:RGrid,RNestedScroll:RNestedScroll,RRollingText:RRollingText,RRollingTextNum:RRollingTextNum,RScroll:RScroll,RScrollMemoryBubble:RScrollMemoryBubble,RScrollRefresh:RScrollRefresh,RScrollSticky:RScrollSticky,RScrollVirtualFallsList:RScrollVirtualFallsList,RScrollVirtualGridList:RScrollVirtualGridList,RTestD:RTestD});for(const e in elements)if(Object.prototype.hasOwnProperty.call(elements,e)){const t=elements[e],i=e.replaceAll(/[A-Z]/g,(e=>"-"+e.toLowerCase())).slice(1);customElements.define(i,t)}export{RainbowElement,RainbowEvent,assignStyle,camelCaseToKebabCase,convertToCamelCase,createCustomEvent,deleteKey,renderChildren};
//# sourceMappingURL=index.esm.js.map
